//test
public class Main {
    public static void main(String[] args) {
        System.out.println("Hello world");
    }
}


//code projet

'create_project.php'
<?php
$page_title = 'Cr√©er un projet';
require_once __DIR__ . '/includes/functions.php';
require_login();

$user = current_user();
?>

<?php include __DIR__ . '/includes/header.php'; ?>

<section class="form-page">
    <h1>Cr√©er un nouveau projet</h1>
    <p>Utilisez ce formulaire pour cr√©er un projet de colocation, de cours ou de voyage et r√©partir les t√¢ches.</p>

    <form method="post" action="save_project.php" class="form-block">
        <div class="form-group">
            <label for="project_name">Nom du projet</label>
            <input type="text" id="project_name" name="project_name" required>
        </div>

        <div class="form-group">
            <label for="project_description">Description (facultatif)</label>
            <textarea id="project_description" name="project_description" rows="3"
                placeholder="Ex : Organisation des t√¢ches m√©nag√®res de l‚Äôappartement..."></textarea>
        </div>


        <h2>Membres invit√©s</h2>
        <p class="hint">
            Invitez vos colocataires, camarades de classe ou amis pour le projet.
            Vous √™tes automatiquement inclus comme cr√©ateur.
        </p>

        <!--new things added -->
        <button type="button" class="btn-secondary invite-link-btn" onclick="toggleInviteLink()">
            Afficher le lien d‚Äôinvitation
        </button>
        <div id="invite-link-box" class="invite-link-box" style="display: none;">
            <p>Partagez ce lien avec les membres que vous avez ajout√©s&nbsp;:</p>
            <code>https://weshare.alwaysdata.net/</code>
            <p class="hint">
                Il suffit de copier ce lien et de l‚Äôenvoyer √† vos colocataires / camarades / amis.
                Ils pourront cr√©er un compte ou se connecter, puis voir ce projet dans leur tableau de bord.
            </p>
        </div>

        <div id="members-container">
            <div class="member-row">
                <input type="text" name="member_name[]" placeholder="Nom du membre" data-temp="true">
                <input type="email" name="member_email[]" placeholder="Email du membre" data-temp="true">
                <button type="button" class="btn-secondary btn-confirm" onclick="confirmMember(this)">‚úì Confirmer</button>
            </div>
        </div>
        <button type="button" class="btn-secondary" onclick="addMemberRow()">+ Ajouter un membre</button>


        <h2>T√¢ches du projet</h2>
        <p class="hint">
            Cr√©ez les t√¢ches et assignez-les √† un membre du projet.
            Exemple : "Sortir les poubelles", "Pr√©parer le plan du voyage"...
        </p>

        <div id="tasks-container">
            <div class="task-row">
                <input type="text" name="task_title[]" placeholder="Titre de la t√¢che">
                <select name="task_assigned_to[]">
                    <option value="">-- Non assign√© --</option>
                </select>
                <button type="button" class="btn-secondary btn-remove" onclick="removeTaskRow(this)">‚úï Supprimer</button>
            </div>
        </div>
        <button type="button" class="btn-secondary" onclick="addTaskRow()">+ Ajouter une t√¢che</button>

        <div class="form-actions">
            <button type="submit" class="btn-primary">Enregistrer le projet</button>
            <a href="dashboard.php" class="btn-link">Annuler</a>
        </div>
    </form>
</section>

<?php include __DIR__ . '/includes/footer.php'; ?>






'dashboard.php'
<?php
$page_title = 'Mes projets';
require_once __DIR__ . '/includes/functions.php';
require_login();

$user = current_user();
$email = strtolower($user['email']);

$projects = load_projects();

$created_projects = [];
$member_projects = [];

foreach ($projects as $project) {
    if (strtolower($project['creator_email']) === $email) {
        $created_projects[] = $project;
        continue;
    }

    $is_member = false;
    foreach ($project['members'] as $member) {
        if (strtolower($member['email']) === $email) {
            $is_member = true;
            break;
        }
    }
    if ($is_member) {
        $member_projects[] = $project;
    }
}

// l'ordre : actifs d'abord
usort($created_projects, function ($a, $b) {
    return strcmp($a['status'] ?? 'active', $b['status'] ?? 'active');
});

usort($member_projects, function ($a, $b) {
    return strcmp($a['status'] ?? 'active', $b['status'] ?? 'active');
});
?>

<?php include __DIR__ . '/includes/header.php'; ?>

<section>
    <h1>Mes projets</h1>
    <p>Bienvenue sur WeShare. Ici vous pouvez organiser les t√¢ches de colocation, projets d‚Äô√©tudes, voyages, etc.</p>

    <a href="create_project.php" class="btn-primary">+ Cr√©er un nouveau projet</a>
</section>

<section class="project-section">
    <h2>Projets que j‚Äôai cr√©√©s</h2>
    <?php if (!$created_projects): ?>
        <p>Vous n‚Äôavez pas encore cr√©√© de projet.</p>
    <?php else: ?>
        <?php foreach ($created_projects as $project): ?>
            <article class="project-card">
                <h3><?= htmlspecialchars($project['name']) ?></h3>
                <?php if (($project['status'] ?? 'active') !== 'done'): ?>
                    <div style="display:flex; gap:10px; margin-top:10px; align-items:center;">
                        <a href="modify_project.php?id=<?= htmlspecialchars($project['id']) ?>" 
                           class="btn-secondary" 
                           style="display:inline-block;">
                            Modifier le projet
                        </a>

                        <form method="post" action="cloturer_project.php" style="margin:0;">
                            <input type="hidden" name="project_id" value="<?= htmlspecialchars($project['id']) ?>">
                            <button type="submit" class="btn-secondary"
                                onclick="return confirm('√ätes-vous s√ªr de vouloir cl√¥turer ce projet ?')"
                                style="display:inline-block;">
                                Cl√¥turer le projet
                            </button>
                        </form>
                    </div>
                <?php else: ?>
                    <div style="display:flex; gap:10px; margin-top:10px; align-items:center;">
                        <span style="color: green; font-weight: bold;">(Termin√©)</span>
                        <form method="post" action="delete_project.php" style="margin:0;">
                            <input type="hidden" name="project_id" value="<?= htmlspecialchars($project['id']) ?>">
                            <button type="submit" class="btn-secondary"
                                onclick="return confirm('√ätes-vous s√ªr de vouloir supprimer ce projet ?')"
                                style="display:inline-block; background-color: #e74c3c; color: white;">
                                üóëÔ∏è Supprimer le projet
                            </button>
                        </form>
                    </div>
                <?php endif; ?>

                <?php if (!empty($project['description'])): ?>
                    <p class="project-desc"><?= nl2br(htmlspecialchars($project['description'])) ?></p>
                <?php endif; ?>

                <p class="project-meta">
                    Cr√©ateur : <?= htmlspecialchars($project['creator_name']) ?>
                    (<?= htmlspecialchars($project['creator_email']) ?>)
                </p>

                <h4>Membres</h4>
                <?php if (empty($project['members'])): ?>
                    <p>Aucun membre invit√©.</p>
                <?php else: ?>
                    <ul>
                        <?php foreach ($project['members'] as $member):
                            $is_creator_member = (strtolower($member['email']) === strtolower($project['creator_email']));
                            ?>
                            <li>
                                <?= htmlspecialchars($member['name']) ?> - <?= htmlspecialchars($member['email']) ?>
                                <?php if (!$is_creator_member): ?>
                                    <span class="badge badge-pending">Invitation en attente</span>
                                <?php endif; ?>
                            </li>
                        <?php endforeach; ?>
                    </ul>
                <?php endif; ?>



                <h4>T√¢ches</h4>
                <?php if (empty($project['tasks'])): ?>
                    <p>Aucune t√¢che d√©finie.</p>
                <?php else: ?>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>T√¢che</th>
                                    <th>Assign√© √†</th>
                                    <th>Statut</th>
                                </tr>
                            </thead>
                            <tbody>
                                <?php
                                $is_done = ($project['status'] ?? 'active') === 'done';
                                ?>
                                <?php foreach ($project['tasks'] as $task):
                                    $is_my_task = (strtolower($task['assigned_to']) === $email);
                                    ?>
                                    <tr class="<?= $is_my_task ? 'my-task' : '' ?>">
                                        <td><?= htmlspecialchars($task['title']) ?></td>
                                        <td><?= htmlspecialchars($task['assigned_to'] ?: 'Non assign√©') ?></td>
                                        <td>
                                            <?php if ($is_my_task && !$is_done): ?>
                                                <!-- si le projet n'est pas termin√©, permettre la modification -->
                                                <form method="post" action="update_task.php">
                                                    <input type="hidden" name="project_id" value="<?= htmlspecialchars($project['id']) ?>">
                                                    <input type="hidden" name="task_id" value="<?= htmlspecialchars($task['id']) ?>">
                                                    <select name="status" onchange="this.form.submit()">
                                                        <option value="todo" <?= $task['status'] === 'todo' ? 'selected' : '' ?>>√Ä faire
                                                        </option>
                                                        <option value="in_progress" <?= $task['status'] === 'in_progress' ? 'selected' : '' ?>>
                                                            En cours</option>
                                                        <option value="done" <?= $task['status'] === 'done' ? 'selected' : '' ?>>Termin√©
                                                        </option>
                                                    </select>
                                                </form>
                                            <?php else: ?>
                                                <?= htmlspecialchars(status_label($task['status'])) ?>
                                            <?php endif; ?>
                                        </td>
                                    </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>
                    </div>
                <?php endif; ?>
            </article>
        <?php endforeach; ?>
    <?php endif; ?>
</section>

<section class="project-section">
    <h2>Projets o√π je suis membre</h2>
    <?php if (!$member_projects): ?>
        <p>Vous n‚Äô√™tes membre d‚Äôaucun projet pour l‚Äôinstant.</p>
    <?php else: ?>
        <?php foreach ($member_projects as $project): ?>
            <article class="project-card">
                <h3><?= htmlspecialchars($project['name']) ?></h3>
                <?php if (!empty($project['description'])): ?>
                    <p class="project-desc"><?= nl2br(htmlspecialchars($project['description'])) ?></p>
                <?php endif; ?>

                <p class="project-meta">
                    Cr√©ateur : <?= htmlspecialchars($project['creator_name']) ?>
                    (<?= htmlspecialchars($project['creator_email']) ?>)
                </p>

                <h4>Membres</h4>
                <?php if (empty($project['members'])): ?>
                    <p>Aucun membre invit√©.</p>
                <?php else: ?>
                    <ul>
                        <?php foreach ($project['members'] as $member): ?>
                            <li><?= htmlspecialchars($member['name']) ?> - <?= htmlspecialchars($member['email']) ?></li>
                        <?php endforeach; ?>
                    </ul>
                <?php endif; ?>

                <h4>Mes t√¢ches dans ce projet</h4>
                <?php
                $my_tasks = array_filter($project['tasks'], function ($task) use ($email) {
                    return strtolower($task['assigned_to']) === $email;
                });
                ?>

                <div class="tasks-toggle">
                    <button class="btn-toggle active" data-project="<?= htmlspecialchars($project['id']) ?>" data-view="mine" onclick="toggleTasksView('<?= htmlspecialchars($project['id']) ?>')">Mes t√¢ches</button>
                    <button class="btn-toggle" data-project="<?= htmlspecialchars($project['id']) ?>" data-view="all" onclick="toggleTasksView('<?= htmlspecialchars($project['id']) ?>')">Toutes les t√¢ches</button>
                </div>

                <?php if (!$my_tasks): ?>
                    <p>Aucune t√¢che ne vous est assign√©e.</p>
                <?php else: ?>
                    <div class="table-wrapper" data-project="<?= htmlspecialchars($project['id']) ?>" data-table="mine">
                        <table>
                            <thead>
                                <tr>
                                    <th>T√¢che</th>
                                    <th>Statut</th>
                                </tr>
                            </thead>
                            <tbody>
                                <?php foreach ($my_tasks as $task): ?>
                                    <tr class="my-task">
                                        <td><?= htmlspecialchars($task['title']) ?></td>
                                        <td>
                                            <form method="post" action="update_task.php">
                                                <input type="hidden" name="project_id" value="<?= htmlspecialchars($project['id']) ?>">
                                                <input type="hidden" name="task_id" value="<?= htmlspecialchars($task['id']) ?>">
                                                <select name="status" onchange="this.form.submit()">
                                                    <option value="todo" <?= $task['status'] === 'todo' ? 'selected' : '' ?>>√Ä faire
                                                    </option>
                                                    <option value="in_progress" <?= $task['status'] === 'in_progress' ? 'selected' : '' ?>>
                                                        En cours</option>
                                                    <option value="done" <?= $task['status'] === 'done' ? 'selected' : '' ?>>Termin√©
                                                    </option>
                                                </select>
                                            </form>
                                        </td>
                                    </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>
                    </div>
                <?php endif; ?>

                <div class="table-wrapper" data-project="<?= htmlspecialchars($project['id']) ?>" data-table="all" style="display: none;">
                    <table>
                        <thead>
                            <tr>
                                <th>T√¢che</th>
                                <th>Assign√© √†</th>
                                <th>Statut</th>
                            </tr>
                        </thead>
                        <tbody>
                            <?php foreach ($project['tasks'] as $task): ?>
                                <?php $is_my_task = (strtolower($task['assigned_to']) === $email); ?>
                                <tr class="<?= $is_my_task ? 'my-task' : '' ?>">
                                    <td><?= htmlspecialchars($task['title']) ?></td>
                                    <td><?= htmlspecialchars($task['assigned_to'] ?: 'Non assign√©') ?></td>
                                    <td>
                                        <?php if ($is_my_task): ?>
                                            <form method="post" action="update_task.php">
                                                <input type="hidden" name="project_id" value="<?= htmlspecialchars($project['id']) ?>">
                                                <input type="hidden" name="task_id" value="<?= htmlspecialchars($task['id']) ?>">
                                                <select name="status" onchange="this.form.submit()">
                                                    <option value="todo" <?= $task['status'] === 'todo' ? 'selected' : '' ?>>√Ä faire
                                                    </option>
                                                    <option value="in_progress" <?= $task['status'] === 'in_progress' ? 'selected' : '' ?>>
                                                        En cours</option>
                                                    <option value="done" <?= $task['status'] === 'done' ? 'selected' : '' ?>>Termin√©
                                                    </option>
                                                </select>
                                            </form>
                                        <?php else: ?>
                                            <?= htmlspecialchars(status_label($task['status'])) ?>
                                        <?php endif; ?>
                                    </td>
                                </tr>
                            <?php endforeach; ?>
                        </tbody>
                    </table>
                </div>
            </article>
        <?php endforeach; ?>
    <?php endif; ?>
</section>

<?php include __DIR__ . '/includes/footer.php'; ?>


'index.php'
<?php
$page_title = 'Connexion';
require_once __DIR__ . '/includes/functions.php';

$errors = [];
$success_message = '';

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $action = $_POST['action'] ?? '';

    if ($action === 'login') {
        $email = $_POST['email'] ?? '';
        $password = $_POST['password'] ?? '';

        if (!$email || !$password) {
            $errors[] = 'Veuillez remplir tous les champs de connexion.';
        } else {
            $user = authenticate($email, $password);
            if ($user) {
                login_user($user);
                header('Location: dashboard.php');
                exit;
            } else {
                $errors[] = 'Email ou mot de passe incorrect.';
            }
        }
    } elseif ($action === 'register') {
        $name = $_POST['name'] ?? '';
        $email = $_POST['email'] ?? '';
        $password = $_POST['password'] ?? '';
        $password_confirm = $_POST['password_confirm'] ?? '';

        if (!$name || !$email || !$password || !$password_confirm) {
            $errors[] = 'Veuillez remplir tous les champs d‚Äôinscription.';
        } elseif (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
            $errors[] = 'Email invalide.';
        } elseif ($password !== $password_confirm) {
            $errors[] = 'Les deux mots de passe ne correspondent pas.';
        } elseif (strlen($password) < 6) {
            $errors[] = 'Le mot de passe doit contenir au moins 6 caract√®res.';
        } else {
            try {
                $user = create_user($name, $email, $password);
                $success_message = "Compte cr√©√© avec succ√®s. Vous pouvez maintenant vous connecter.";
            } catch (Exception $e) {
                $errors[] = $e->getMessage();
            }
        }
    }
}
?>

<?php include __DIR__ . '/includes/header.php'; ?>

<div class="auth-wrapper">
    <div class="auth-card">
        <h1>Connexion</h1>

        <?php if ($errors): ?>
            <div class="alert alert-error">
                <ul>
                    <?php foreach ($errors as $err): ?>
                        <li><?= htmlspecialchars($err) ?></li>
                    <?php endforeach; ?>
                </ul>
            </div>
        <?php endif; ?>

        <?php if ($success_message): ?>
            <div class="alert alert-success">
                <?= htmlspecialchars($success_message) ?>
            </div>
        <?php endif; ?>

        <form method="post" class="form-block">
            <input type="hidden" name="action" value="login">
            <div class="form-group">
                <label for="login_email">Email</label>
                <input type="email" id="login_email" name="email" required>
            </div>
            <div class="form-group">
                <label for="login_password">Mot de passe</label>
                <input type="password" id="login_password" name="password" required>
            </div>
            <button type="submit" class="btn-primary">Se connecter</button>
        </form>
    </div>

    <div class="auth-card">
        <h2>Cr√©er un compte</h2>
        <form method="post" class="form-block">
            <input type="hidden" name="action" value="register">
            <div class="form-group">
                <label for="reg_name">Nom</label>
                <input type="text" id="reg_name" name="name" required>
            </div>
            <div class="form-group">
                <label for="reg_email">Email</label>
                <input type="email" id="reg_email" name="email" required>
            </div>
            <div class="form-group">
                <label for="reg_password">Mot de passe</label>
                <input type="password" id="reg_password" name="password" required>
            </div>
            <div class="form-group">
                <label for="reg_password_confirm">Confirmer le mot de passe</label>
                <input type="password" id="reg_password_confirm" name="password_confirm" required>
            </div>
            <button type="submit" class="btn-secondary">Cr√©er un compte</button>
        </form>
    </div>
</div>

<?php include __DIR__ . '/includes/footer.php'; ?>




'logout.php'
<?php
require_once __DIR__ . '/includes/config.php';

session_unset();
session_destroy();

header('Location: index.php');
exit;





'save_project.php'
<?php
require_once __DIR__ . '/includes/functions.php';
require_login();

$user = current_user();

if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    header('Location: create_project.php');
    exit;
}

$name = trim($_POST['project_name'] ?? '');
$description = trim($_POST['project_description'] ?? '');

if ($name === '') {
    $_SESSION['error'] = "Le nom du projet est obligatoire.";
    header('Location: create_project.php');
    exit;
}

// Â§ÑÁêÜÊàêÂëò
$members = [];
$member_names = $_POST['member_name'] ?? [];
$member_emails = $_POST['member_email'] ?? [];

for ($i = 0; $i < count($member_emails); $i++) {
    $m_name = trim($member_names[$i] ?? '');
    $m_email = trim($member_emails[$i] ?? '');
    if ($m_email === '' && $m_name === '') {
        continue;
    }
    if (!filter_var($m_email, FILTER_VALIDATE_EMAIL)) {
        continue; // ÁÆÄÂçïËøáÊª§Êó†Êïà email
    }
    $members[] = [
        'name' => $m_name ?: $m_email,
        'email' => strtolower($m_email),
    ];
}

// Á°Æ‰øùÂàõÂª∫‰∫∫‰πüÂú®ÊàêÂëòÂàóË°®‰∏≠ÔºàÊåâ email ÂéªÈáçÔºâ
$creator_email = strtolower($user['email']);
$already_in = false;
foreach ($members as $m) {
    if (strtolower($m['email']) === $creator_email) {
        $already_in = true;
        break;
    }
}
if (!$already_in) {
    $members[] = [
        'name' => $user['name'],
        'email' => $creator_email,
    ];
}

// Â§ÑÁêÜ‰ªªÂä°
$tasks = [];
$task_titles = $_POST['task_title'] ?? [];
$task_assigned_to = $_POST['task_assigned_to'] ?? [];

for ($i = 0; $i < count($task_titles); $i++) {
    $title = trim($task_titles[$i] ?? '');
    $assigned_email = trim($task_assigned_to[$i] ?? '');
    if ($title === '') {
        continue;
    }
    $tasks[] = [
        'id' => generate_id('t_'),
        'title' => $title,
        'assigned_to' => strtolower($assigned_email),
        'status' => 'todo',
    ];
}

$projects = load_projects();

$project = [
    'id' => generate_id('p_'),
    'name' => $name,
    'description' => $description,
    'creator_id' => $user['id'],
    'creator_name' => $user['name'],
    'creator_email' => $creator_email,
    'members' => $members,
    'tasks' => $tasks,
    'created_at' => date('c'),
];

$projects[] = $project;
save_projects($projects);

header('Location: dashboard.php');
exit;





'update_task.php'
<?php
require_once __DIR__ . '/includes/functions.php';
require_login();

if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    header('Location: dashboard.php');
    exit;
}

$project_id = $_POST['project_id'] ?? '';
$task_id = $_POST['task_id'] ?? '';
$status = $_POST['status'] ?? 'todo';

$allowed_status = ['todo', 'in_progress', 'done'];
if (!in_array($status, $allowed_status, true)) {
    $status = 'todo';
}

$projects = load_projects();
$changed = false;

foreach ($projects as &$project) {
    if ($project['id'] !== $project_id) {
        continue;
    }
    foreach ($project['tasks'] as &$task) {
        if ($task['id'] === $task_id) {
            $task['status'] = $status;
            $changed = true;
            break 2;
        }
    }
}

if ($changed) {
    save_projects($projects);
}

header('Location: dashboard.php');
exit;






'delete_project.php'
<?php
require_once __DIR__ . '/includes/functions.php';
require_login();

if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    header('Location: dashboard.php');
    exit;
}

$project_id = $_POST['project_id'] ?? '';
$user = current_user();
$email = strtolower($user['email']);

$projects = load_projects();
$project_found = false;
$is_creator = false;

foreach ($projects as $project) {
    if ($project['id'] === $project_id) {
        $project_found = true;
        // Seul le cr√©ateur peut supprimer
        if (strtolower($project['creator_email']) === $email) {
            $is_creator = true;
        }
        break;
    }
}

if (!$project_found) {
    $_SESSION['error'] = "Projet introuvable.";
    header('Location: dashboard.php');
    exit;
}

if (!$is_creator) {
    $_SESSION['error'] = "Seul le cr√©ateur peut supprimer ce projet.";
    header('Location: dashboard.php');
    exit;
}

// Supprimer le projet
$projects = array_filter($projects, function ($p) use ($project_id) {
    return $p['id'] !== $project_id;
});

// R√©indexer le tableau pour √©viter les probl√®mes avec les cl√©s
$projects = array_values($projects);

save_projects($projects);

$_SESSION['success'] = "Le projet a √©t√© supprim√© avec succ√®s.";
header('Location: dashboard.php');
exit;






'modify_project.php'
<?php
$page_title = 'Modifier un projet';
require_once __DIR__ . '/includes/functions.php';
require_login();

$user = current_user();
$project_id = $_GET['id'] ?? null;

if (!$project_id) {
    $_SESSION['error'] = "ID du projet manquant.";
    header('Location: dashboard.php');
    exit;
}

$projects = load_projects();
$project = null;

foreach ($projects as $p) {
    if ($p['id'] === $project_id) {
        $project = $p;
        break;
    }
}

if (!$project) {
    $_SESSION['error'] = "Projet introuvable.";
    header('Location: dashboard.php');
    exit;
}

// V√©rifier que l'utilisateur est membre du projet
$is_member = false;
$user_email = strtolower($user['email']);
foreach ($project['members'] as $member) {
    if (strtolower($member['email']) === $user_email) {
        $is_member = true;
        break;
    }
}
if (!$is_member) {
    $_SESSION['error'] = "Vous n'avez pas la permission de modifier ce projet.";
    header('Location: dashboard.php');
    exit;
}

$is_creator = (strtolower($project['creator_email']) === $user_email);
?>

<?php include __DIR__ . '/includes/header.php'; ?>

<section class="form-page">
    <h1>Modifier le projet : <?= htmlspecialchars($project['name']) ?></h1>
    <p>Modifiez les informations, les membres et les t√¢ches du projet.</p>

    <form method="post" action="update_project.php" class="form-block">
        <input type="hidden" name="project_id" value="<?= htmlspecialchars($project['id']) ?>">

        <div class="form-group">
            <label for="project_name">Nom du projet</label>
            <input type="text" id="project_name" name="project_name" value="<?= htmlspecialchars($project['name']) ?>" required>
        </div>

        <div class="form-group">
            <label for="project_description">Description (facultatif)</label>
            <textarea id="project_description" name="project_description" rows="3"
                placeholder="Ex : Organisation des t√¢ches m√©nag√®res de l'appartement..."><?= htmlspecialchars($project['description'] ?? '') ?></textarea>
        </div>

        <h2>Membres du projet</h2>
        <p class="hint">
            G√©rez les membres du projet<?php if ($is_creator): ?>. Vous √™tes le cr√©ateur et ne pouvez pas √™tre supprim√©<?php endif; ?>.
        </p>
        <button type="button" class="btn-secondary invite-link-btn" onclick="toggleInviteLink()">
            Afficher le lien d'invitation
        </button>
        <div id="invite-link-box" class="invite-link-box" style="display: none;">
            <p>Partagez ce lien avec les membres que vous avez ajout√©s&nbsp;:</p>
            <code>https://weshare.alwaysdata.net/</code>
            <p class="hint">
                Il suffit de copier ce lien et de l'envoyer √† vos colocataires / camarades / amis.
                Ils pourront cr√©er un compte ou se connecter, puis voir ce projet dans leur tableau de bord.
            </p>
        </div>

        <div id="members-container">
            <?php foreach ($project['members'] as $member): ?>
                <div class="member-row">
                    <input type="text" name="member_name[]" placeholder="Nom du membre" value="<?= htmlspecialchars($member['name']) ?>">
                    <input type="email" name="member_email[]" placeholder="Email du membre" value="<?= htmlspecialchars($member['email']) ?>">
                    <?php if (strtolower($member['email']) !== strtolower($project['creator_email'])): ?>
                        <button type="button" class="btn-secondary btn-remove" onclick="removeMemberRow(this)">‚úï Supprimer</button>
                    <?php else: ?>
                        <span class="badge badge-creator">Cr√©ateur</span>
                    <?php endif; ?>
                </div>
            <?php endforeach; ?>
        </div>
        <button type="button" class="btn-secondary" onclick="addMemberRow()">+ Ajouter un membre</button>


        <h2>T√¢ches du projet</h2>
        <p class="hint">
            Cr√©ez, modifiez ou supprimez les t√¢ches du projet.
        </p>

        <div id="tasks-container">
            <?php foreach ($project['tasks'] as $task): ?>
                <div class="task-row">
                    <input type="text" name="task_title[]" placeholder="Titre de la t√¢che" value="<?= htmlspecialchars($task['title']) ?>">
                    <select name="task_assigned_to[]">
                        <option value="">-- Non assign√© --</option>
                        <?php foreach ($project['members'] as $member): ?>
                            <option value="<?= htmlspecialchars($member['email']) ?>" <?= strtolower($task['assigned_to'] ?? '') === strtolower($member['email']) ? 'selected' : '' ?>>
                                <?= htmlspecialchars($member['name']) ?>
                            </option>
                        <?php endforeach; ?>
                    </select>
                    <input type="hidden" name="task_id[]" value="<?= htmlspecialchars($task['id']) ?>">
                    <button type="button" class="btn-secondary btn-remove" onclick="removeTaskRow(this)">‚úï Supprimer</button>
                </div>
            <?php endforeach; ?>
        </div>
        <button type="button" class="btn-secondary" onclick="addTaskRow()">+ Ajouter une t√¢che</button>

        <div class="form-actions">
            <button type="submit" class="btn-primary">Enregistrer les modifications</button>
            <a href="dashboard.php" class="btn-link">Annuler</a>
        </div>
    </form>

    <?php if ($is_creator): ?>
        <form method="post" action="delete_project.php" style="display:inline; margin-top: 16px;">
            <input type="hidden" name="project_id" value="<?= htmlspecialchars($project['id']) ?>">
            <button type="submit" class="btn-secondary"
                onclick="return confirm('√ätes-vous s√ªr de vouloir supprimer ce projet ?')"
                style="background-color: #e74c3c; color: white;">
                üóëÔ∏è Supprimer le projet
            </button>
        </form>
    <?php endif; ?>
</section>

<?php include __DIR__ . '/includes/footer.php'; ?>





'update_project.php'
<?php
require_once __DIR__ . '/includes/functions.php';
require_login();

$user = current_user();

if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    header('Location: dashboard.php');
    exit;
}

$project_id = $_POST['project_id'] ?? null;
$name = trim($_POST['project_name'] ?? '');
$description = trim($_POST['project_description'] ?? '');

if (!$project_id || $name === '') {
    $_SESSION['error'] = "Le nom du projet est obligatoire.";
    header('Location: modify_project.php?id=' . urlencode($project_id ?? ''));
    exit;
}

$projects = load_projects();
$project = null;
$project_index = null;

foreach ($projects as $index => $p) {
    if ($p['id'] === $project_id) {
        $project = $p;
        $project_index = $index;
        break;
    }
}

if (!$project) {
    $_SESSION['error'] = "Projet introuvable.";
    header('Location: dashboard.php');
    exit;
}

// V√©rifier que l'utilisateur est membre du projet
$is_member = false;
$user_email = strtolower($user['email']);
foreach ($project['members'] as $member) {
    if (strtolower($member['email']) === $user_email) {
        $is_member = true;
        break;
    }
}
if (!$is_member) {
    $_SESSION['error'] = "Vous n'avez pas la permission de modifier ce projet.";
    header('Location: dashboard.php');
    exit;
}

// Traiter les membres
$members = [];
$member_names = $_POST['member_name'] ?? [];
$member_emails = $_POST['member_email'] ?? [];

for ($i = 0; $i < count($member_emails); $i++) {
    $m_name = trim($member_names[$i] ?? '');
    $m_email = trim($member_emails[$i] ?? '');
    
    if ($m_email === '' && $m_name === '') {
        continue;
    }
    
    if (!filter_var($m_email, FILTER_VALIDATE_EMAIL)) {
        continue; // Filtrer les emails invalides
    }
    
    $members[] = [
        'name' => $m_name ?: $m_email,
        'email' => strtolower($m_email),
    ];
}

// S'assurer que le cr√©ateur est dans la liste des membres
$creator_email = strtolower($project['creator_email']);
$already_in = false;
foreach ($members as $m) {
    if (strtolower($m['email']) === $creator_email) {
        $already_in = true;
        break;
    }
}
if (!$already_in) {
    $members[] = [
        'name' => $project['creator_name'],
        'email' => $creator_email,
    ];
}

// Traiter les t√¢ches
$tasks = [];
$task_titles = $_POST['task_title'] ?? [];
$task_assigned_to = $_POST['task_assigned_to'] ?? [];
$task_ids = $_POST['task_id'] ?? [];

for ($i = 0; $i < count($task_titles); $i++) {
    $title = trim($task_titles[$i] ?? '');
    $assigned_email = trim($task_assigned_to[$i] ?? '');
    $task_id = $task_ids[$i] ?? null;
    
    if ($title === '') {
        continue;
    }
    
    // Garder l'ID existant ou en g√©n√©rer un nouveau
    if (!$task_id) {
        $task_id = generate_id('t_');
    }
    
    // Chercher la t√¢che existante pour r√©cup√©rer son statut
    $status = 'todo';
    foreach ($project['tasks'] as $old_task) {
        if ($old_task['id'] === $task_id) {
            $status = $old_task['status'] ?? 'todo';
            break;
        }
    }
    
    $tasks[] = [
        'id' => $task_id,
        'title' => $title,
        'assigned_to' => strtolower($assigned_email),
        'status' => $status,
    ];
}

// Mettre √† jour le projet
$project['name'] = $name;
$project['description'] = $description;
$project['members'] = $members;
$project['tasks'] = $tasks;

$projects[$project_index] = $project;
save_projects($projects);

$_SESSION['success'] = "Le projet a √©t√© modifi√© avec succ√®s.";
header('Location: dashboard.php');
exit;






'cloturer_project.php'
<?php
require_once __DIR__ . '/includes/functions.php';
require_login();

if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    header('Location: dashboard.php');
    exit;
}

$project_id = $_POST['project_id'] ?? '';
$user = current_user();
$email = strtolower($user['email']);

$projects = load_projects();

foreach ($projects as &$project) {
    if ($project['id'] === $project_id) {
        
        // Seul le cr√©ateur peut cl√¥turer
        if (strtolower($project['creator_email']) === $email) {
            $project['status'] = 'done';
        }

        break;
    }
}

save_projects($projects);

header('Location: dashboard.php');
exit;






'assets/app.js'
function addMemberRow() {
    const container = document.getElementById('members-container');
    if (!container) return;

    const div = document.createElement('div');
    div.className = 'member-row';
    div.innerHTML = `
        <input type="text" name="member_name[]" placeholder="Nom du membre" data-temp="true">
        <input type="email" name="member_email[]" placeholder="Email du membre" data-temp="true">
        <button type="button" class="btn-secondary btn-confirm" onclick="confirmMember(this)">‚úì Confirmer</button>
    `;
    container.appendChild(div);
}

function confirmMember(button) {
    const row = button.closest('.member-row');
    if (!row) return;

    const nameInput = row.querySelector('input[name="member_name[]"]');
    const emailInput = row.querySelector('input[name="member_email[]"]');
    const name = nameInput?.value.trim();
    const email = emailInput?.value.trim();

    if (!email || !name) {
        alert('Veuillez remplir le nom et l\'email du membre');
        return;
    }

    // Marquer comme confirm√©
    nameInput.removeAttribute('data-temp');
    emailInput.removeAttribute('data-temp');
    
    // Remplacer le bouton confirmer par un bouton supprimer
    button.innerHTML = '‚úï Supprimer';
    button.className = 'btn-secondary btn-remove';
    button.onclick = function() { removeMemberRow(this); };

    // Mettre √† jour les options dans les s√©lecteurs de t√¢ches
    updateTaskAssigneeSelects();
}

function removeMemberRow(button) {
    const row = button.closest('.member-row');
    if (row) {
        row.remove();
        updateTaskAssigneeSelects();
    }
}

function updateTaskAssigneeSelects() {
    // R√©cup√©rer tous les membres confirm√©s
    const members = [];
    const memberRows = document.querySelectorAll('.member-row');
    
    memberRows.forEach(row => {
        const nameInput = row.querySelector('input[name="member_name[]"]');
        const emailInput = row.querySelector('input[name="member_email[]"]');
        
        // Ne prendre que les membres confirm√©s (sans data-temp)
        if (nameInput && emailInput && !nameInput.hasAttribute('data-temp')) {
            members.push({
                name: nameInput.value,
                email: emailInput.value
            });
        }
    });

    // Mettre √† jour les s√©lecteurs dans les t√¢ches
    const taskRows = document.querySelectorAll('.task-row');
    taskRows.forEach(row => {
        const select = row.querySelector('select[name="task_assigned_to[]"]');
        if (select) {
            const currentValue = select.value;
            select.innerHTML = '<option value="">-- Non assign√© --</option>';
            
            members.forEach(member => {
                const option = document.createElement('option');
                option.value = member.email;
                option.textContent = member.name;
                if (member.email === currentValue) {
                    option.selected = true;
                }
                select.appendChild(option);
            });
        }
    });
}

function addTaskRow() {
    const container = document.getElementById('tasks-container');
    if (!container) return;

    // R√©cup√©rer la liste des membres confirm√©s
    const members = [];
    const memberRows = document.querySelectorAll('.member-row');
    
    memberRows.forEach(row => {
        const nameInput = row.querySelector('input[name="member_name[]"]');
        const emailInput = row.querySelector('input[name="member_email[]"]');
        
        if (nameInput && emailInput && !nameInput.hasAttribute('data-temp')) {
            members.push({
                name: nameInput.value,
                email: emailInput.value
            });
        }
    });

    const div = document.createElement('div');
    div.className = 'task-row';
    
    let selectHTML = '<select name="task_assigned_to[]"><option value="">-- Non assign√© --</option>';
    members.forEach(member => {
        selectHTML += `<option value="${member.email}">${member.name}</option>`;
    });
    selectHTML += '</select>';
    
    div.innerHTML = `
        <input type="text" name="task_title[]" placeholder="Titre de la t√¢che">
        ${selectHTML}
        <button type="button" class="btn-secondary btn-remove" onclick="removeTaskRow(this)">‚úï Supprimer</button>
    `;
    container.appendChild(div);
}

function removeMemberRow(button) {
    const row = button.closest('.member-row');
    if (row) {
        row.remove();
    }
}

function removeTaskRow(button) {
    const row = button.closest('.task-row');
    if (row) {
        row.remove();
    }
}

function toggleInviteLink() {
    const box = document.getElementById('invite-link-box');
    if (!box) return;

    if (box.style.display === 'none' || box.style.display === '') {
        box.style.display = 'block';
    } else {
        box.style.display = 'none';
    }
}

function toggleTasksView(projectId) {
    const allTasksBtn = document.querySelector(`[data-project="${projectId}"][data-view="all"]`);
    const myTasksBtn = document.querySelector(`[data-project="${projectId}"][data-view="mine"]`);
    const allTasksTable = document.querySelector(`[data-project="${projectId}"][data-table="all"]`);
    const myTasksTable = document.querySelector(`[data-project="${projectId}"][data-table="mine"]`);

    if (!allTasksTable || !myTasksTable) return;

    if (allTasksTable.style.display === 'none' || allTasksTable.style.display === '') {
        // Afficher toutes les t√¢ches
        allTasksTable.style.display = 'block';
        myTasksTable.style.display = 'none';
        if (allTasksBtn) allTasksBtn.classList.add('active');
        if (myTasksBtn) myTasksBtn.classList.remove('active');
    } else {
        // Afficher mes t√¢ches
        allTasksTable.style.display = 'none';
        myTasksTable.style.display = 'block';
        if (allTasksBtn) allTasksBtn.classList.remove('active');
        if (myTasksBtn) myTasksBtn.classList.add('active');
    }
}






'assets/style.css'
*,
*::before,
*::after {
    box-sizing: border-box;
}

body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: #f5f5f7;
    color: #222;
}

a {
    text-decoration: none;
    color: inherit;
}

.container {
    max-width: 960px;
    margin: 0 auto;
    padding: 0 16px;
}

/* Header */

.main-header {
    background: #ffffff;
    border-bottom: 1px solid #e2e2e2;
    position: sticky;
    top: 0;
    z-index: 10;
}

.header-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 0;
}

.logo a {
    font-weight: 700;
    font-size: 1.2rem;
}

.main-nav a {
    margin-left: 16px;
    font-size: 0.95rem;
}

.user-label {
    margin-left: 16px;
    font-style: italic;
}

/* Main */

.main-content {
    padding: 24px 0 40px;
}

/* Auth cards */

.auth-wrapper {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 24px;
    margin-top: 24px;
}

.auth-card {
    background: #ffffff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
}

.auth-card h1,
.auth-card h2 {
    margin-top: 0;
}

/* Forms */

.form-block {
    margin-top: 12px;
}

.form-group {
    margin-bottom: 12px;
    display: flex;
    flex-direction: column;
}

.form-group label {
    font-size: 0.9rem;
    margin-bottom: 4px;
}

.form-group input,
.form-group textarea,
.form-group select {
    padding: 8px 10px;
    border: 1px solid #d0d0d0;
    border-radius: 8px;
    font: inherit;
}

.form-group textarea {
    resize: vertical;
}

/* Buttons */

.btn-primary,
.btn-secondary,
.btn-logout,
.btn-link {
    display: inline-block;
    padding: 8px 14px;
    border-radius: 999px;
    font-size: 0.9rem;
    border: none;
    cursor: pointer;
}

.invite-link-btn {
    margin-top: 8px;
    margin-bottom: 8px;
}

.invite-link-box {
    background: #f0f4ff;
    border-radius: 10px;
    padding: 10px 12px;
    margin-bottom: 12px;
    font-size: 0.9rem;
}

.invite-link-box code {
    display: inline-block;
    padding: 4px 8px;
    background: #fff;
    border-radius: 6px;
    border: 1px dashed #6574cd;
    font-family: "SF Mono", Menlo, Monaco, Consolas, monospace;
}


.btn-primary {
    background: #007bff;
    color: #fff;
}

.btn-secondary {
    background: #e9ecef;
    color: #111;
}

.btn-logout {
    background: #ff4d4f;
    color: #fff;
}

.btn-link {
    background: transparent;
    color: #007bff;
    padding-left: 0;
}

/* Alerts */

.alert {
    padding: 10px 12px;
    border-radius: 10px;
    margin-bottom: 10px;
    font-size: 0.9rem;
}

.alert-error {
    background: #ffe3e3;
    color: #8b0000;
}

.alert-success {
    background: #e6ffea;
    color: #256029;
}

/* Project cards */

.project-section {
    margin-top: 32px;
}

.project-card {
    background: #ffffff;
    padding: 16px;
    border-radius: 12px;
    box-shadow: 0 4px 14px rgba(0, 0, 0, 0.05);
    margin-bottom: 16px;
}

.project-card h3 {
    margin-top: 0;
}

.project-desc {
    font-size: 0.9rem;
    margin-bottom: 8px;
}

.project-meta {
    font-size: 0.85rem;
    color: #555;
}

/* Tables */

.table-wrapper {
    overflow-x: auto;
}

table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
    margin-top: 8px;
}

th,
td {
    border-bottom: 1px solid #eee;
    padding: 6px 4px;
    text-align: left;
}

th {
    font-weight: 600;
}

.my-task {
    background: #e8f5ff;
}

.badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.75rem;
    margin-left: 6px;
    white-space: nowrap;
    height: fit-content;
}

.badge-pending {
    background: #fff3cd;
    color: #856404;
    border: 1px solid #ffeeba;
}

.badge-creator {
    background: #d1ecf1;
    color: #0c5460;
    border: 1px solid #bee5eb;
}


/* Members & tasks rows */

.member-row,
.task-row {
    display: flex;
    gap: 8px;
    margin-bottom: 8px;
}

.member-row input,
.task-row input,
.task-row select,
.member-row select {
    flex: 1;
}

.member-row button,
.member-row .badge,
.task-row button {
    flex-shrink: 0;
    min-width: fit-content;
}

/* Form page */

.form-page h1 {
    margin-top: 0;
}

.hint {
    font-size: 0.85rem;
    color: #555;
}

.form-actions {
    margin-top: 16px;
    display: flex;
    gap: 12px;
    align-items: center;
}

/* Footer */

.main-footer {
    border-top: 1px solid #ddd;
    padding: 14px 0;
    background: #ffffff;
    font-size: 0.8rem;
    text-align: center;
}






'data/projects.json'
[]



'data/user.json'
[]




'includes/config.php'
<?php
// start session
if (session_status() === PHP_SESSION_NONE) {
    session_start();
}

// data file path constants
define('DATA_DIR', __DIR__ . '/../data');
define('USERS_FILE', DATA_DIR . '/users.json');
define('PROJECTS_FILE', DATA_DIR . '/projects.json');




'includes/footer.php'
</main>
<footer class="main-footer">
    <div class="container">
        <p>WeShare - R√©partition √©quitable des t√¢ches</p>
    </div>
</footer>
<script src="assets/app.js"></script>
</body>

</html>





'includes/functions.php'
<?php
require_once __DIR__ . '/config.php';
require_once __DIR__ . '/db.php';

/**
 * JSON file read/write utilities (√† changer plus tard pour la base de donn√©es)
 */
function load_json(string $file): array
{
    if (!file_exists($file)) {
        return [];
    }
    $json = file_get_contents($file);
    $data = json_decode($json, true);
    return is_array($data) ? $data : [];
}

function save_json(string $file, array $data): void
{
    file_put_contents(
        $file,
        json_encode($data, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE)
    );
}

/**
 * User-related functions
 */
/*function load_users(): array
{
    return load_json(USERS_FILE);
}

function save_users(array $users): void
{
    save_json(USERS_FILE, $users);
}*/

/*function find_user_by_email(string $email): ?array
{
    $users = load_users();
    $email = strtolower(trim($email));
    foreach ($users as $user) {
        if (strtolower($user['email']) === $email) {
            return $user;
        }
    }
    return null;
}*/

function find_user_by_email(string $email): ?array
{
    global $pdo;

    $stmt = $pdo->prepare("SELECT * FROM users WHERE email = ?");
    $stmt->execute([strtolower(trim($email))]);
    
    $user = $stmt->fetch();
    return $user ?: null;
}

/*function create_user(string $name, string $email, string $password): array
{
    $users = load_users();

    if (find_user_by_email($email)) {
        throw new Exception("Cet email est d√©j√† utilis√©.");
    }

    $user = [
        'id' => uniqid('u_', true),
        'name' => trim($name),
        'email' => strtolower(trim($email)),
        'password' => password_hash($password, PASSWORD_DEFAULT),
    ];

    $users[] = $user;
    save_users($users);

    return $user;
}*/

function create_user(string $name, string $email, string $password): array
{
    global $pdo;

    if (find_user_by_email($email)) {
        throw new Exception("Cet email est d√©j√† utilis√©.");
    }

    $emailClean = strtolower(trim($email));
    $passwordHash = password_hash($password, PASSWORD_DEFAULT);

    $sql = "INSERT INTO users (nom, email, password) VALUES (?, ?, ?)";
    $stmt = $pdo->prepare($sql);
    $stmt->execute([$name, $emailClean, $passwordHash]);

    return [
        'id' => $pdo->lastInsertId(),
        'nom' => $name,
        'email' => $emailClean
    ];
}

function authenticate(string $email, string $password): ?array
{
    $user = find_user_by_email($email);
    if (!$user) {
        return null;
    }
    if (!password_verify($password, $user['password'])) {
        return null;
    }
    return $user;
}

function login_user(array $user): void
{
    $_SESSION['user'] = [
        'id' => $user['id'],
        'name' => $user['nom'],
        'email' => $user['email'],
    ];
}

function current_user(): ?array
{
    return $_SESSION['user'] ?? null;
}

function require_login(): void
{
    if (!current_user()) {
        header('Location: index.php');
        exit;
    }
}

/**
 * Project-related functions (√† changer plus tard pour la base de donn√©es)
 */
function load_projects(): array
{
    return load_json(PROJECTS_FILE);
}

function save_projects(array $projects): void
{
    save_json(PROJECTS_FILE, $projects);
}

function generate_id(string $prefix = ''): string
{
    return uniqid($prefix, true);
}

/**
 * Get human-readable status label
 */
function status_label(string $status): string
{
    switch ($status) {
        case 'in_progress':
            return 'En cours';
        case 'done':
            return 'Termin√©';
        case 'todo':
        default:
            return '√Ä faire';
    }
}







'includes/header.php'
<?php
require_once __DIR__ . '/functions.php';
$user = current_user();
$page_title = $page_title ?? 'WeShare';
?>
<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title><?= htmlspecialchars($page_title) ?> - WeShare</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="assets/style.css">
</head>

<body>
    <header class="main-header">
        <div class="container header-inner">
            <div class="logo">
                <a href="dashboard.php">WeShare</a>
            </div>
            <nav class="main-nav">
                <?php if ($user): ?>
                    <a href="dashboard.php">Mes projets</a>
                    <a href="create_project.php">Cr√©er un projet</a>
                    <span class="user-label">Bonjour, <?= htmlspecialchars($user['name']) ?></span>
                    <a href="logout.php" class="btn-logout">D√©connexion</a>
                <?php else: ?>
                    <a href="index.php">Connexion</a>
                <?php endif; ?>
            </nav>
        </div>
    </header>
    <main class="container main-content">






'includes/db.php'
<?php

$host = 'mysql-weshare.alwaysdata.net';
$db   = 'weshare_users';
$user = 'weshare_admin';
$pass = 'adminWeShare';

$options = [
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
    PDO::ATTR_EMULATE_PREPARES   => false,
];

try {
    // Cr√©ation de la connexion globale $pdo
    $pdo = new PDO("mysql:host=$host;dbname=$db;charset=utf8", $user, $pass, $options);
} catch (\PDOException $e) {
    // Si erreur on arr√™te tout
    die("Erreur de connexion base de donn√©es : " . $e->getMessage());
}
?>


